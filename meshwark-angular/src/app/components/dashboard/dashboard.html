<div class="container-fluid mt-3 dashboard-container" style="direction: rtl;">
  <h1 class="mb-4" style="color: #4C6DAA;">لوحة التحكم</h1>

  <div *ngIf="isLoading" class="text-center">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">جاري التحميل...</span>
    </div>
    <p>جاري تحميل البيانات...</p>
  </div>

  <div *ngIf="!isLoading">
    <!-- Summary Cards -->
    <div class="row mb-4">
      <div class="col-xl-3 col-md-6 mb-4">
        <div class="card border-end-primary shadow h-100 py-2">
          <div class="card-body">
            <div class="row no-gutters align-items-center">
              <div class="col me-2">
                <div class="text-xs fw-bold text-primary text-uppercase mb-1">إجمالي المستخدمين</div>
                <div class="h5 mb-0 fw-bold text-gray-800">{{ counts.users || 0 }}</div>
              </div>
              <div class="col-auto">
                <i class="fas fa-users fa-2x text-gray-300"></i>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="col-xl-3 col-md-6 mb-4">
        <div class="card border-end-success shadow h-100 py-2">
          <div class="card-body">
            <div class="row no-gutters align-items-center">
              <div class="col me-2">
                <div class="text-xs fw-bold text-success text-uppercase mb-1">إجمالي السائقين</div>
                <div class="h5 mb-0 fw-bold text-gray-800">{{ counts.drivers || 0 }}</div>
              </div>
              <div class="col-auto">
                <i class="fas fa-car fa-2x text-gray-300"></i>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="col-xl-3 col-md-6 mb-4">
        <div class="card border-end-info shadow h-100 py-2">
          <div class="card-body">
            <div class="row no-gutters align-items-center">
              <div class="col me-2">
                <div class="text-xs fw-bold text-info text-uppercase mb-1">إجمالي الركاب</div>
                <div class="h5 mb-0 fw-bold text-gray-800">{{ counts.riders || 0 }}</div>
              </div>
              <div class="col-auto">
                <i class="fas fa-user-friends fa-2x text-gray-300"></i>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="col-xl-3 col-md-6 mb-4">
        <div class="card border-end-warning shadow h-100 py-2">
          <div class="card-body">
            <div class="row no-gutters align-items-center">
              <div class="col me-2">
                <div class="text-xs fw-bold text-warning text-uppercase mb-1">إجمالي الإداريين</div>
                <div class="h5 mb-0 fw-bold text-gray-800">{{ counts.admins || 0 }}</div>
              </div>
              <div class="col-auto">
                <i class="fas fa-user-shield fa-2x text-gray-300"></i>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Charts Section -->
    <div class="row">
      <div class="col-lg-8 mb-4">
        <div class="card shadow">
          <div class="card-header py-3">
            <h6 class="m-0 fw-bold" style="color: #4C6DAA;">إحصائيات النظام (رسم بياني)</h6>
          </div>
          <div class="card-body">
            <div style="height: 400px;"> <!-- Set a fixed height for the chart container -->
              <canvas baseChart class="chart"
                  [data]="barChartData"
                  [options]="barChartOptions"
                  [type]="barChartType"
                  (chartHover)="chartHovered($event)"
                  (chartClick)="chartClicked($event)"></canvas>
            </div>
          </div>
        </div>
      </div>

      <!-- Example Doughnut Chart Card - can be uncommented and populated if needed -->
      <!--
      <div class="col-lg-4 mb-4">
        <div class="card shadow">
          <div class="card-header py-3">
            <h6 class="m-0 fw-bold" style="color: #4C6DAA;">توزيع المستخدمين (مثال)</h6>
          </div>
          <div class="card-body">
            <div style="height: 400px;">
              <canvas baseChart
                [data]="doughnutChartData"
                [type]="doughnutChartType"
                [options]="doughnutChartOptions">
              </canvas>
            </div>
          </div>
        </div>
      </div>
      -->
    </div>
  </div>
</div>
